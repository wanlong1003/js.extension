/*!
  * js.extensions v1.0.0
  * (c) 2014-2019 liuwanlong
  * Released under the MIT License.
  */
(function(Array){Object.defineProperties(Array.prototype,{All:{writable:true,enumerable:false,configurable:true,value:function(clause){for(var i=0;i<this.length;i++){if(!clause.apply(this[i],[this[i]])){return false}}return true}},Any:{writable:true,enumerable:false,configurable:true,value:function(clause){for(var i=0;i<this.length;i++){if(clause.apply(this[i],[this[i]])){return true}}return false}},Clone:{writable:true,enumerable:false,configurable:true,value:function(){var arr=[];for(var i=0;i<this.length;i++){arr.push(this[i].Clone())}return arr}},Remove:{writable:true,enumerable:false,configurable:true,value:function(clause){for(var i=0;i<this.length;i++){if(clause.apply(this[i],[this[i]])){this.splice(i,1);i--}}return this}},First:{writable:true,enumerable:false,configurable:true,value:function(clause){if(this.length<=0){return null}if(!clause){return this[0]}for(var i=0;i<this.length;i++){if(clause.apply(this[i],[this[i]])){return this[i]}}return null}},Last:{writable:true,enumerable:false,configurable:true,value:function(clause){if(this.length<=0){return null}if(!clause){return this[this.length-1]}for(var i=this.length-1;i>=0;i--){if(clause.apply(this[i],[this[i]])){return this[i]}}return null}},Where:{writable:true,enumerable:false,configurable:true,value:function(clause){var arr=[];for(var i=0;i<this.length;i++){if(clause.apply(this[i],[this[i],i])){arr[arr.length]=this[i]}}return arr}},OrderBy:{writable:true,enumerable:false,configurable:true,value:function(clause){this.sort(function(a,b){var x=clause.apply(a,[a]);var y=clause.apply(b,[b]);return x<y?-1:(x>y?1:0)});return this}},OrderByDescending:{writable:true,enumerable:false,configurable:true,value:function(clause){this.sort(function(a,b){var x=clause.apply(a,[a]);var y=clause.apply(b,[b]);return x>y?-1:(x<y?1:0)});return this}},Select:{writable:true,enumerable:false,configurable:true,value:function(clause){var arr=[];for(var i=0;i<this.length;i++){item=clause.apply(this[i],[this[i]]);arr[arr.length]=item
}return arr}},Skip:{writable:true,enumerable:false,configurable:true,value:function(count){var arr=[];for(var i=count;i<this.length;i++){arr.push(this[i])}return arr}},Take:{writable:true,enumerable:false,configurable:true,value:function(count){var arr=[];for(var i=0;i<count;i++){arr.push(this[i])}return arr}},Max:{writable:true,enumerable:false,configurable:true,value:function(clause){if(this.length<=0){return null}if(!clause){clause=function(item){return item}}var max=clause.apply(this[0],[this[0]]);for(i=0;i<this.length;i++){var value=clause.apply(this[i],[this[i]]);if(value&&max<value){max=value}}return max}},Min:{writable:true,enumerable:false,configurable:true,value:function(clause){if(this.length<=0){return null}if(!clause){clause=function(item){return item}}var min=clause.apply(this[0],[this[0]]);for(i=0;i<this.length;i++){var value=clause.apply(this[i],[this[i]]);if(value&&min>value){min=value}}return min}},Sum:{writable:true,enumerable:false,configurable:true,value:function(clause){var sum=0;for(var i=0;i<this.length;i++){var value=clause.apply(this[i],[this[i],i]);if(value){if(!value.IsNumber()){value=new Number(value);if(isNaN(value)){value=0}}sum+=value}}return sum}},Average:{writable:true,enumerable:false,configurable:true,value:function(clause){var sum=0;for(var i=0;i<this.length;i++){var value=clause.apply(this[i],[this[i],i]);if(value){if(!value.IsNumber()){value=new Number(value);if(isNaN(value)){value=0}}sum+=value}}return sum/this.length}}})})(window.Array);
(function(Date){Object.defineProperties(Date.prototype,{ToString:{writable:true,enumerable:false,configurable:true,value:function(fmt){if(!fmt){fmt="yyyy-MM-dd HH:mm:ss.fff"}var o={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"f+":this.getMilliseconds()};if(/(y+)/.test(fmt)){fmt=fmt.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))}for(var k in o){if(new RegExp("("+k+")").test(fmt)){fmt=fmt.replace(RegExp.$1,(RegExp.$1.length==1)?(o[k]):(("00"+o[k]).substr(String(o[k]).length)))}}return fmt}},AddYears:{writable:true,enumerable:false,configurable:true,value:function(value){var year=this.getFullYear();year=year+value;this.setFullYear(year);return this}},AddMonths:{writable:true,enumerable:false,configurable:true,value:function(value){value=Math.floor(value);var year=this.getFullYear();var month=this.getMonth();year=year+value/12;month=(value%12)+month;if(month>12){year=year+1;month=month%12}this.setFullYear(year);this.setMonth(month);return this}},AddDays:{writable:true,enumerable:false,configurable:true,value:function(value){var millisec=this.getTime();millisec=millisec+(value*86400000);this.setTime(millisec);return this}},AddHours:{writable:true,enumerable:false,configurable:true,value:function(value){var millisec=this.getTime();millisec=millisec+(value*3600000);this.setTime(millisec);return this}},AddMinutes:{writable:true,enumerable:false,configurable:true,value:function(value){var millisec=this.getTime();millisec=millisec+(value*60000);this.setTime(millisec);return this}},AddSeconds:{writable:true,enumerable:false,configurable:true,value:function(value){var millisec=this.getTime();millisec=millisec+(value*1000);this.setTime(millisec);return this}},AddMilliseconds:{writable:true,enumerable:false,configurable:true,value:function(value){var millisec=this.getTime();millisec=millisec+value;this.setTime(millisec);return this}}})})(window.Date);
(function(Object){Object.defineProperties(Object.prototype,{IsFunction:{writable:true,enumerable:false,configurable:true,value:function(){return typeof this==="function"}},IsArray:{writable:true,enumerable:false,configurable:true,value:function(){return typeof this==="object"&&this instanceof Array}},IsNumber:{writable:true,enumerable:false,configurable:true,value:function(){return(typeof this==="number"||this instanceof Number)&&!isNaN(this)}},IsString:{writable:true,enumerable:false,configurable:true,value:function(){return typeof this==="string"||this instanceof String}},IsBoolean:{writable:true,enumerable:false,configurable:true,value:function(){return typeof this==="boolean"}},IsObject:{writable:true,enumerable:false,configurable:true,value:function(){return typeof this==="object"&&this.IsArray()===false}},Clone:{writable:true,enumerable:false,configurable:true,value:function(){if(this.IsString()||this.IsNumber()||this.IsBoolean()){return this.constructor(this)}if(this.IsArray()){return this.Clone()}var props=Object.getOwnPropertyNames(this);if(props&&props.length===0){return new Object(this)}var obj={};for(var i=0;i<props.length;i++){var prop=props[i];var value=this[prop];if(value.IsObject()){value.Clone()}obj[prop]=value}return obj}},ToJson:{writable:true,enumerable:false,configurable:true,value:function(){return JSON.stringify(this)}},Extend:{writable:true,enumerable:false,configurable:true,value:function(o){var names=Object.getOwnPropertyNames(o);for(var i=0;i<names.length;i++){if(names[i] in this){continue}var desc=Object.getOwnPropertyDescriptor(o,names[i]);Object.defineProperty(this,names[i],desc)}return this}}})})(window.Object);
(function(String){Object.defineProperties(String.prototype,{IsNullOrEmpty:{writable:true,enumerable:false,configurable:true,value:function(){return this===null||this.length===0}},IsNullOrWhitespace:{writable:true,enumerable:false,configurable:true,value:function(){return this===null||this.replace(/\s/g,"").length===0}},IsEmail:{writable:true,enumerable:false,configurable:true,value:function(){return/^(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)$/i.test(this)}},IsURL:{writable:true,enumerable:false,configurable:true,value:function(){return/^(?:\b(https?|ftp|file):\/\/[\-A-Z0-9+&@#\/%?=~_|!:,.;]*[\-A-Z0-9+&@#\/%=~_|])$/i.test(this)}},ToObject:{writable:true,enumerable:false,configurable:true,value:function(){return JSON.parse(this)}}})})(window.String);
